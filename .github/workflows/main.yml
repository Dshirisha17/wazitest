name: SSH Command via PowerShell on Windows

on:
  workflow_dispatch:

jobs:
  ssh-job:
    runs-on: [self-hosted, windows]

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Run SSH Command using PowerShell
      run: |
        $password = ConvertTo-SecureString -String "s3cure" -AsPlainText -Force
        $cred = New-Object System.Management.Automation.PSCredential ("ibmuser", $password)
        ssh -Credential $cred -p 2222 ibmuser@10.10.1.180 "whoami"




    # - name: Run SSH command on Windows
    #   run: |
      #   # $host = "10.10.1.180"
      #   # $username = "ibmuser"
      #   # $password = "s3cure"
      #   # $port = 2222

      #   # Run the SSH command with sshpass (assuming sshpass.exe is in PATH)
      #   sshpass -p 's3cure' ssh ibmuser@10.10.1.180 -p 2222 'whoami'
 
